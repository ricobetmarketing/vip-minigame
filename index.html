<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Choose Your Mission</title>
<meta name="color-scheme" content="dark light">
<style>
  :root{
    --a1:#ff6ec4; --a2:#7873f5; --card:#111228; --ring:#ffffff24;
    --txt:#f2f3ff; --dim:#cfd0ff; --accent:#a4e0ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  html,body{margin:0;color:var(--txt);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}

  /* Background image + soft overlay for readability */
  body{
    --bgimg:url('https://ricomx.ft-crm.com/media-api/serve/4c140695-50a6-4299-ba89-74e46ae291a9_d2fca62c3853293ec42d7121691049c2.jpg');
    background:#0e0f23 fixed no-repeat center/cover;
  }
  body::before{
    content:""; position:fixed; inset:0; z-index:-1;
    background:
      radial-gradient(1200px 600px at 50% 0%, #00000080 0%, #000000cc 60%, #000000ee 100%),
      var(--bgimg) center/cover no-repeat;
    filter:saturate(1.05);
  }

  a{color:inherit}
  .wrap{max-width:1100px;margin:0 auto;padding:20px}

  /* Header */
  .header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
  .badge{background:linear-gradient(90deg,var(--a1),var(--a2));padding:10px 14px;border-radius:12px;font-weight:900;box-shadow:0 8px 24px #0007}
  .sub{color:var(--dim);font-size:14px;text-shadow:0 1px 0 #000}

  /* Grid */
  .grid{display:grid;gap:14px;margin-top:16px}
  @media(min-width:720px){.grid{grid-template-columns:repeat(3,1fr)}}

  /* Card */
  .card{
    position:relative;background:#0f122bc0;border:1px solid var(--ring);border-radius:16px;overflow:hidden;
    box-shadow:0 12px 30px #000a;transform:translateZ(0);
    transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease;
    isolation:isolate; backdrop-filter: blur(6px) saturate(140%);
    animation:floaty 5s ease-in-out infinite;
  }
  .card:nth-child(2){animation-duration:5.6s}
  .card:nth-child(3){animation-duration:6.2s}
  @keyframes floaty{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}
  .card:hover{transform:translateY(-4px);box-shadow:0 18px 40px #000c;border-color:#ffffff40}

  /* Media area with your GIF + glow */
  .media{
    position:relative;aspect-ratio:4/3;background: radial-gradient(circle at 50% 50%, #1b1d45 0%, #0d0f24 100%);
    display:grid;place-items:center;overflow:hidden;
  }
  .media::after{
    content:"";position:absolute;inset:-40%;
    background:conic-gradient(from 0deg, #ffffff12, transparent 30% 70%, #ffffff12 100%);
    animation:spin 6s linear infinite;pointer-events:none;mix-blend:overlay;
  }
  @keyframes spin{to{transform:rotate(1turn)}}

  /* Gift GIF styling */
  .media img.reward{
    width:60%;max-width:230px;transform:translateZ(0) scale(1);
    filter:drop-shadow(0 10px 22px rgba(255,110,196,0.6));
    animation:floatGift 5s ease-in-out infinite;
  }
  @keyframes floatGift{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-6px) scale(1.04)}}

  .body{padding:14px}
  .title{font-weight:900;font-size:18px;margin:0 0 6px;text-shadow:0 1px 0 #000}
  .mission{font-size:13px;color:var(--dim);margin:0 0 10px}

  .cta{
    display:inline-flex;align-items:center;justify-content:center;gap:8px;
    padding:10px 14px;border-radius:12px;font-weight:800;text-decoration:none;
    background:linear-gradient(90deg,var(--a1),var(--a2));color:#fff;border:0;cursor:pointer;
    box-shadow:0 6px 18px #0007;transition:transform .15s ease, box-shadow .2s ease;
  }
  .cta:active{transform:translateY(1px);box-shadow:0 3px 10px #0007}
  .code-hint{margin-top:8px;font-size:12px;color:var(--dim)}
  .muted{opacity:.85}

  /* (i) info button + tooltip */
  .i-btn{
    position:absolute;top:10px;right:10px;z-index:3;width:32px;height:32px;border-radius:999px;
    display:grid;place-items:center;cursor:pointer;
    background:#0e0f23cc;border:1px solid var(--ring);color:#fff;font-weight:900;
    backdrop-filter:saturate(120%) blur(4px);
  }
  .tooltip{
    position:absolute;top:52px;right:10px;z-index:4;min-width:190px;max-width:260px;
    background:#0e0f23;border:1px solid var(--ring);border-radius:12px;padding:10px;font-size:13px;box-shadow:0 12px 30px #000a;
    opacity:0;transform:translateY(-4px);pointer-events:none;transition:opacity .2s ease, transform .2s ease;
  }
  .card[data-tip="open"] .tooltip{opacity:1;transform:translateY(0);pointer-events:auto}
  .tooltip .pill{display:inline-block;padding:4px 8px;border-radius:999px;background:#1f2040;border:1px solid #3a3f77;font-weight:700;font-size:12px;color:#fff}
  .tooltip .line{display:flex;align-items:center;gap:8px;margin-top:8px}
  .tooltip .line img{width:24px;height:24px}

  /* Modal */
  .modal-backdrop{
    position:fixed;inset:0;background:#000a;backdrop-filter:blur(3px);
    display:none;align-items:center;justify-content:center;padding:20px;z-index:40;
  }
  .modal-backdrop.show{display:flex}
  .modal{
    width:min(520px, 96vw);background:#0f1126;border:1px solid #ffffff24;border-radius:16px;box-shadow:0 16px 60px #000c;overflow:hidden;
    animation:pop .18s ease-out;
  }
  @keyframes pop{from{transform:scale(.97);opacity:0}to{transform:scale(1);opacity:1}}
  .m-head{padding:14px;background:linear-gradient(90deg,var(--a1),var(--a2));font-weight:900;color:#fff;display:flex;align-items:center;justify-content:space-between}
  .m-body{padding:14px}
  .m-row{display:flex;gap:12px;align-items:center}
  .m-row img{width:54px;height:54px;object-fit:contain}
  .m-title{font-weight:800}
  .check{margin-top:12px;padding:10px;border:1px dashed #ffffff2e;border-radius:10px;background:#0b0c1f}
  .check label{display:flex;gap:10px;align-items:flex-start;font-size:14px;cursor:pointer}
  .m-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
  .btn{padding:10px 14px;border-radius:12px;border:1px solid #3a3f77;background:#1f2040;color:#fff;font-weight:800;cursor:pointer}
  .btn.primary{background:linear-gradient(90deg,var(--a1),var(--a2));border:0}
  .btn:disabled{opacity:.5;cursor:not-allowed}
  .code-panel{margin-top:10px;padding:10px;border:1px solid #ffffff24;border-radius:12px;background:#0a0c1d;display:none}
  .code{width:100%;padding:10px;border-radius:10px;border:1px solid #ffffff24;background:#0e0f23;color:#fff;font-weight:900;text-align:center;letter-spacing:1px}
  .copybar{display:flex;gap:10px;margin-top:10px}
  .copybar .btn{flex:1}
  .tiny{font-size:12px;color:var(--dim);margin-top:6px}

  /* Confetti */
  .confetti{position:fixed;inset:0;pointer-events:none;z-index:60}
  .confetti i{position:absolute;width:8px;height:14px;background:linear-gradient(180deg,var(--a1),var(--a2));opacity:.9;
              transform:translateY(-10vh) rotate(0deg);animation:fall 900ms ease-in forwards}
  @keyframes fall{to{transform:translateY(110vh) rotate(720deg);opacity:0}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="badge">üéÅ Choose ONE Mission</div>
      <div class="sub">Tap ‚ìò for reward hints ‚Ä¢ Confirm to reveal your voucher</div>
    </div>

    <div class="grid" id="cards">
      <!-- Card 1 -->
      <div class="card" data-id="A" data-title="Gift Box 1" data-description="Mission: turnover 100 to unlock" data-voucher="ABCDEF"
           data-reward-icon="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png">
        <button class="i-btn" aria-label="More info">i</button>
        <div class="tooltip" role="dialog" aria-label="Gift 1 info">
          <div class="pill">Gift Box 1</div>
          <div class="line"><img alt="" src="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png"><span>Reward icon</span></div>
          <div class="tiny muted">Turnover 100 to unlock</div>
        </div>
        <div class="media">
          <img class="reward" alt="Gift Box" src="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png">
        </div>
        <div class="body">
          <div class="title">Gift Box 1</div>
          <p class="mission">Turnover 100 to unlock</p>
          <button class="cta choose">I want this mission</button>
          <div class="code-hint">Your code will appear after confirming.</div>
        </div>
      </div>

      <!-- Card 2 -->
      <div class="card" data-id="B" data-title="Gift Box 2" data-description="Mission: turnover 80 to unlock" data-voucher="POIUYT"
           data-reward-icon="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png">
        <button class="i-btn" aria-label="More info">i</button>
        <div class="tooltip" role="dialog" aria-label="Gift 2 info">
          <div class="pill">Gift Box 2</div>
          <div class="line"><img alt="" src="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png"><span>Reward icon</span></div>
          <div class="tiny muted">Turnover 80 to unlock</div>
        </div>
        <div class="media">
          <img class="reward" alt="Gift Box" src="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png">
        </div>
        <div class="body">
          <div class="title">Gift Box 2</div>
          <p class="mission">Turnover 80 to unlock</p>
          <button class="cta choose">I want this mission</button>
          <div class="code-hint">Your code will appear after confirming.</div>
        </div>
      </div>

      <!-- Card 3 -->
      <div class="card" data-id="C" data-title="Gift Box 3" data-description="Mission: turnover 50 to unlock" data-voucher="123456"
           data-reward-icon="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png">
        <button class="i-btn" aria-label="More info">i</button>
        <div class="tooltip" role="dialog" aria-label="Gift 3 info">
          <div class="pill">Gift Box 3</div>
          <div class="line"><img alt="" src="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png"><span>Reward icon</span></div>
          <div class="tiny muted">Turnover 50 to unlock</div>
        </div>
        <div class="media">
          <img class="reward" alt="Gift Box" src="https://ricomx.ft-crm.com/media-api/serve/5b55a687-d742-4c8d-bf41-1ba837f4e84f_1.png">
        </div>
        <div class="body">
          <div class="title">Gift Box 3</div>
          <p class="mission">Turnover 50 to unlock</p>
          <button class="cta choose">I want this mission</button>
          <div class="code-hint">Your code will appear after confirming.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="m-title">
      <div class="m-head">
        <div id="m-title">Confirm your mission</div>
        <button class="btn" id="m-close" aria-label="Close">‚úï</button>
      </div>
      <div class="m-body">
        <div class="m-row">
          <img id="m-icon" alt="">
          <div>
            <div class="m-title" id="m-name">Gift Box</div>
            <div class="muted" id="m-desc">Mission description‚Ä¶</div>
          </div>
        </div>

        <div class="check">
          <label>
            <input type="checkbox" id="m-ack" />
            <span>I confirm I want to choose this mission. I understand other missions may be locked after this selection.</span>
          </label>
        </div>

        <div class="m-actions">
          <button class="btn" id="m-cancel">Cancel</button>
          <button class="btn primary" id="m-confirm" disabled>Confirm & reveal code</button>
        </div>

        <div class="code-panel" id="m-codepanel">
          <div class="m-title">üéâ Your voucher code</div>
          <input class="code" id="m-code" readonly />
          <div class="copybar">
            <button class="btn primary" id="m-copy">Copy code</button>
            <a class="btn" id="m-open" href="https://rico.bet/myprofile" target="_blank" rel="noopener">Open redeem page</a>
          </div>
          <div class="tiny">Tip: if copy is blocked, long-press the code above.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Confetti layer -->
  <div class="confetti" id="confetti"></div>

<script>
  // --- tiny helper: chime SFX (no external files)
  const AudioFX = (()=> {
    let ctx;
    function ensure(){
      if(!ctx){ ctx = new (window.AudioContext||window.webkitAudioContext)(); }
      return ctx;
    }
    function beep(seq=[440,660,880], dur=0.08){
      const c = ensure();
      let t = c.currentTime + 0.02;
      seq.forEach((f, i)=>{
        const o = c.createOscillator();
        const g = c.createGain();
        o.frequency.value = f;
        o.type = "triangle";
        g.gain.value = 0.0001;
        g.gain.setTargetAtTime(0.12, t, 0.008);
        g.gain.setTargetAtTime(0.0001, t+dur, 0.02);
        o.connect(g).connect(c.destination);
        o.start(t); o.stop(t + dur + 0.05);
        t += dur * (i===0?1.1:0.9);
      });
    }
    return { beep };
  })();

  // --- confetti burst
  function confettiBurst() {
    const layer = document.getElementById('confetti');
    for (let i=0;i<60;i++){
      const p = document.createElement('i');
      p.style.left = (Math.random()*100) + 'vw';
      p.style.background = `linear-gradient(180deg, hsl(${Math.random()*360} 90% 60%), hsl(${Math.random()*360} 90% 50%))`;
      p.style.animationDuration = (700 + Math.random()*600) + 'ms';
      layer.appendChild(p);
      setTimeout(()=> layer.removeChild(p), 1200);
    }
  }

  const cards = document.getElementById('cards');
  const backdrop = document.getElementById('backdrop');
  const mName  = document.getElementById('m-name');
  const mDesc  = document.getElementById('m-desc');
  const mIcon  = document.getElementById('m-icon');
  const mAck   = document.getElementById('m-ack');
  const mConfirm = document.getElementById('m-confirm');
  const mCancel  = document.getElementById('m-cancel');
  const mClose   = document.getElementById('m-close');
  const mCodePanel = document.getElementById('m-codepanel');
  const mCode   = document.getElementById('m-code');
  const mCopy   = document.getElementById('m-copy');

  let current = null;

  // Toggle tooltip on ‚ìò
  cards.addEventListener('click', (e)=>{
    const info = e.target.closest('.i-btn');
    if(info){
      const card = info.closest('.card');
      const open = card.getAttribute('data-tip') === 'open';
      document.querySelectorAll('.card[data-tip="open"]').forEach(c=>c.removeAttribute('data-tip'));
      if(!open) card.setAttribute('data-tip', 'open');
      e.stopPropagation();
    }
  });
  document.addEventListener('click', (e)=>{
    if(!e.target.closest('.card')) document.querySelectorAll('.card[data-tip="open"]').forEach(c=>c.removeAttribute('data-tip'));
  });

  // Open modal on "choose"
  cards.addEventListener('click', (e)=>{
    const btn = e.target.closest('.choose');
    if(!btn) return;
    const card = btn.closest('.card');
    current = {
      id: card.dataset.id,
      title: card.dataset.title,
      desc:  card.dataset.description,
      code:  card.dataset.voucher,
      icon:  card.dataset.rewardIcon
    };
    mName.textContent = current.title;
    mDesc.textContent = current.desc;
    mIcon.src = current.icon;
    mIcon.alt = current.title + ' reward icon';
    mAck.checked = false;
    mConfirm.disabled = true;
    mCodePanel.style.display = 'none';
    backdrop.classList.add('show');
    backdrop.setAttribute('aria-hidden','false');
    AudioFX.beep([520,680,880], 0.06);
  });

  // Close modal
  function closeModal(){
    backdrop.classList.remove('show');
    backdrop.setAttribute('aria-hidden','true');
  }
  [mCancel, mClose].forEach(b=>b.addEventListener('click', closeModal));
  backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeModal(); });

  // Enable confirm when acknowledged
  mAck.addEventListener('change', ()=>{ mConfirm.disabled = !mAck.checked; });

  // Confirm ‚Üí reveal code
  mConfirm.addEventListener('click', ()=>{
    if(!current) return;
    mCode.value = current.code;
    mCodePanel.style.display = 'block';
    AudioFX.beep([660,880,1040], 0.07);
    confettiBurst();
  });

  // Copy code
  mCopy.addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(mCode.value);
      mCopy.textContent = 'Copied ‚úì';
      setTimeout(()=> mCopy.textContent = 'Copy code', 1400);
      AudioFX.beep([900,720], 0.06);
    }catch(e){
      mCopy.textContent = 'Copy failed ‚Äì select';
      setTimeout(()=> mCopy.textContent = 'Copy code', 1600);
    }
  });
</script>
</body>
</html>
